# Chess Bot

Шахматный бот с поддержкой различных уровней сложности и анализом позиций.

## Особенности

- Три уровня сложности (Easy, Medium, Hard)
- Анализ позиций с рекомендациями
- Кэширование оценок позиций
- Защита от атак и ограничение запросов
- Метрики производительности
- Оптимизация использования памяти

## Установка
```bash
git clone https://github.com/katalvlaran/telega-shess.git
cd chessbot
go mod download
```
## Запуск
```bash
go run cmd/bot/main.go
```

## Конфигурация

Бот поддерживает следующие переменные окружения:

- `BOT_TOKEN` - токен Telegram бота
- `DIFFICULTY` - уровень сложности (easy, medium, hard)
- `MAX_GAMES` - максимальное количество одновременных игр
- `CACHE_SIZE` - размер кэша оценок позиций

## API

### Команды бота

- `/start` - начать взаимодействие с ботом
- `/play` - начать новую игру
- `/move e2-e4` - сделать ход
- `/analyze` - получить анализ текущей позиции
- `/surrender` - сдаться
- `/draw` - предложить ничью

### Уровни сложности

- Easy: случайные ходы
- Medium: оценка позиции на глубину 3 хода
- Hard: оценка позиции на глубину 5 ходов с альфа-бета отсечением

## Тестирование
```bash
go test ./...
```

## Метрики

Доступны следующие метрики Prometheus:

- `chess_move_latency_seconds` - время обработки ходов
- `chess_cache_hits_total` - количество попаданий в кэш
- `chess_active_games` - количество активных игр

## Безопасность

- Ограничение запросов: 60 запросов в минуту
- Токены доступа с временем жизни 24 часа
- Защита от XSS и CSRF атак
- Безопасное сравнение строк

## Лицензия

MIT