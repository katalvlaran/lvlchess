# Telega-Chess

**Telega-Chess** ‚Äî —ç—Ç–æ Telegram-–±–æ—Ç –¥–ª—è –ø–æ—à–∞–≥–æ–≤–æ–π –∏–≥—Ä—ã –≤ —à–∞—Ö–º–∞—Ç—ã –º–µ–∂–¥—É –¥–≤—É–º—è (—Ä–µ–∞–ª—å–Ω—ã–º–∏) –∏–≥—Ä–æ–∫–∞–º–∏. –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è:

- **–°–æ–∑–¥–∞–Ω–∏–µ –∫–æ–º–Ω–∞—Ç** (—Å –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–æ–π, –∫—Ç–æ –∏–≥—Ä–∞–µ—Ç –∑–∞ –±–µ–ª—ã—Ö),
- **–í—ã–±–æ—Ä —Ñ–∏–≥—É—Ä –∏ —Ö–æ–¥–æ–≤** —á–µ—Ä–µ–∑ inline-–∫–Ω–æ–ø–∫–∏,
- **–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ —Å–ø–æ—Å–æ–±—ã –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –¥–æ—Å–∫–∏** (ASCII –≤ –ª–∏—á–∫–∞—Ö, ¬´–≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω—ã–π¬ª ASCII/–∏–ª–∏ SVG –≤ –≥—Ä—É–ø–ø–∞—Ö),
- **–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è** —Å –±–∏–±–ª–∏–æ—Ç–µ–∫–æ–π [notnil/chess](https://github.com/notnil/chess) –¥–ª—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏ —Ö–æ–¥–æ–≤ (–≤–∫–ª—é—á–∞—è —Ä–æ–∫–∏—Ä–æ–≤–∫—É, –ø—Ä–µ–≤—Ä–∞—â–µ–Ω–∏–µ –ø–µ—à–∫–∏).

## –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

1. [–û—Å–Ω–æ–≤–Ω—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏](#–æ—Å–Ω–æ–≤–Ω—ã–µ-–æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏)
2. [–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫](#—É—Å—Ç–∞–Ω–æ–≤–∫–∞-–∏-–∑–∞–ø—É—Å–∫)
3. [–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è](#–ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ-–æ–∫—Ä—É–∂–µ–Ω–∏—è)
4. [–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞](#–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞)
5. [–û—Å–Ω–æ–≤–Ω—ã–µ —Ñ–∞–π–ª—ã –∏ —Ñ—É–Ω–∫—Ü–∏–∏](#–æ—Å–Ω–æ–≤–Ω—ã–µ-—Ñ–∞–π–ª—ã-–∏-—Ñ—É–Ω–∫—Ü–∏–∏)
6. [–°—Ü–µ–Ω–∞—Ä–∏–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è](#—Å—Ü–µ–Ω–∞—Ä–∏–∏-–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è)
7. [–ö–æ–º–∞–Ω–¥—ã –∏ inline-–∫–Ω–æ–ø–∫–∏](#–∫–æ–º–∞–Ω–¥—ã-–∏-inline-–∫–Ω–æ–ø–∫–∏)
8. [–ö–∞–∫ –¥–µ–ª–∞—Ç—å —Ö–æ–¥—ã](#–∫–∞–∫-–¥–µ–ª–∞—Ç—å-—Ö–æ–¥—ã)
9. [–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ](#—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ)
10. [–î–∞–ª—å–Ω–µ–π—à–∏–µ –ø–ª–∞–Ω—ã](#–¥–∞–ª—å–Ω–µ–π—à–∏–µ-–ø–ª–∞–Ω—ã)

---

## 1. –û—Å–Ω–æ–≤–Ω—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

- **–ß–∏—Å—Ç–∞—è –º–µ—Ö–∞–Ω–∏–∫–∞ —à–∞—Ö–º–∞—Ç** (–Ω–∞ –±–∞–∑–µ `github.com/notnil/chess`): –≤—Å–µ –ø—Ä–∞–≤–∏–ª–∞ (–≤–∫–ª—é—á–∞—è —Ä–æ–∫–∏—Ä–æ–≤–∫—É, –≤–∑—è—Ç–∏–µ –Ω–∞ –ø—Ä–æ—Ö–æ–¥–µ, –ø—Ä–µ–≤—Ä–∞—â–µ–Ω–∏–µ –ø–µ—à–∫–∏).
- **–î–≤—É—Ö—à–∞–≥–æ–≤—ã–π –≤—ã–±–æ—Ä —Ö–æ–¥–∞** —á–µ—Ä–µ–∑ inline-–∫–Ω–æ–ø–∫–∏: —Å–Ω–∞—á–∞–ª–∞ –≤—ã–±–∏—Ä–∞–µ–º —Ñ–∏–≥—É—Ä—É, –∑–∞—Ç–µ–º –¥–æ—Å—Ç—É–ø–Ω—ã–π —Ö–æ–¥.
- **ASCII-–¥–æ—Å–∫–∞** –≤ –ª–∏—á–Ω–æ–º —á–∞—Ç–µ:
    - –î–ª—è –±–µ–ª—ã—Ö ‚Äî –∫–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–π –≤–∏–¥,
    - –î–ª—è —á—ë—Ä–Ω—ã—Ö ‚Äî –ø–µ—Ä–µ–≤—ë—Ä–Ω—É—Ç—ã–π.
- **–ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–∞—è** (–∏–ª–∏ SVG) –¥–æ—Å–∫–∞ –≤ –≥—Ä—É–ø–ø–æ–≤–æ–º —á–∞—Ç–µ.
- **–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ** —Å–æ—Å—Ç–æ—è–Ω–∏—è –≤ PostgreSQL (–∫–æ–º–Ω–∞—Ç—ã, –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏).
- **–†–∞–∑–¥–µ–ª–µ–Ω–∏–µ** –Ω–∞ —Ñ–∞–π–ª—ã –ø–æ –ª–æ–≥–∏—á–µ—Å–∫–∏–º –æ–±–ª–∞—Å—Ç—è–º (handlers, db, game, utils).

---

## 2. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫

1. **–°–∫–ª–æ–Ω–∏—Ä–æ–≤–∞—Ç—å** —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π:
   ```bash
   git clone https://github.com/your-username/telega-chess.git
   cd telega-chess
   ```
2. **–°–∫–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä–æ–≤–∞—Ç—å** –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è (—Å–º. [.env](#–ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ-–æ–∫—Ä—É–∂–µ–Ω–∏—è)). –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —É–∫–∞–∑–∞–ª–∏ `BOT_TOKEN`, `PG_USER`, `PG_PASS`, –∏ —Ç.–¥.

3. **–°–æ–±—Ä–∞—Ç—å –∏ –∑–∞–ø—É—Å—Ç–∏—Ç—å**:
   ```bash
   go build -o telega-chess ./cmd/bot.go
   ./telega-chess
   ```
   –ò–ª–∏ –ø—Ä–æ—Å—Ç–æ `go run ./cmd/bot.go`.

4. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å**, —á—Ç–æ –±–æ—Ç –æ—Ç–≤–µ—á–∞–µ—Ç: –æ—Ç–∫—Ä–æ–π—Ç–µ `t.me/<–í–∞—à–ë–æ—Ç>` –≤ Telegram, –≤–≤–µ–¥–∏—Ç–µ `/start`.

---

## 3. –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

–í —Ñ–∞–π–ª–µ **`.env`** –¥–æ–ª–∂–Ω—ã –Ω–∞—Ö–æ–¥–∏—Ç—å—Å—è –∫–ª—é—á–µ–≤—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ:

- `BOT_TOKEN` ‚Äî —Ç–æ–∫–µ–Ω Telegram-–±–æ—Ç–∞ (–æ—Ç BotFather).
- `OWNER_ID` ‚Äî –≤–∞—à ID (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ).
- `PG_USER`, `PG_PASS`, `PG_HOST`, `PG_PORT`, `PG_DB_NAME` ‚Äî –¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ PostgreSQL.
- –ü—Ä–∏–º–µ—Ä:
  ```env
  BOT_TOKEN="123456:ABC-..."
  OWNER_ID=467103090
  PG_USER="postgres"
  PG_PASS="secret"
  PG_HOST="localhost"
  PG_PORT="5432"
  PG_DB_NAME="telega_chess"
  ```

---

## 4. –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

```
/telega-chess
‚îú‚îÄ‚îÄ /cmd
‚îÇ   ‚îî‚îÄ‚îÄ bot.go                              # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞: –∑–∞–ø—É—Å–∫ –±–æ—Ç–∞ (Telegram), LoadConfig(),InitLogger(),InitDB(),NewBotAPI(botToken),NewHandler(bot),HandleUpdate(context.Background(), update) ...
‚îú‚îÄ‚îÄ /config
‚îÇ   ‚îî‚îÄ‚îÄ config.go                           # –ß—Ç–µ–Ω–∏–µ/–≤–∞–ª–∏–¥–∞—Ü–∏—è –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö —Å—Ä–µ–¥—ã (env)
‚îú‚îÄ‚îÄ /internal
‚îÇ   ‚îú‚îÄ‚îÄ /db
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ /models                         # –°—Ç—Ä—É–∫—Ç—É—Ä—ã –æ–ø–∏—Å—ã–≤–∞—é—â–∏–µ —Ç–∞–±–ª–∏—Ü—ã 
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ rooms.go                    # –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø–æ —Ç–∞–±–ª–∏—Ü–µ rooms +–≤–∞–ª–∏–¥–∞—Ü–∏–µ–π
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ tournaments.go              # –°—Ç—Ä—É–∫—Ç—É—Ä—ã –ø–æ —Ç–∞–±–ª–∏—Ü–∞–º tournaments –∏ tournament_settings +–≤–∞–ª–∏–¥–∞—Ü–∏–µ–π
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ users.go                    # –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø–æ —Ç–∞–±–ª–∏—Ü–µ users +–≤–∞–ª–∏–¥–∞—Ü–∏–µ–π
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ /repositories                   # CRUD-–æ–ø–µ—Ä–∞—Ü–∏–∏ —Å —Ç–∞–±–ª–∏—Ü–∞–º–∏
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ rooms_repo.go               # CRUD-–æ–ø–µ—Ä–∞—Ü–∏–∏ –ø–æ —Ç–∞–±–ª–∏—Ü–µ rooms
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ tournament_settings_repo.go # CRUD-–æ–ø–µ—Ä–∞—Ü–∏–∏ –ø–æ —Ç–∞–±–ª–∏—Ü–µ tournament_settings
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ tournaments_repo.go         # CRUD-–æ–ø–µ—Ä–∞—Ü–∏–∏ –ø–æ —Ç–∞–±–ª–∏—Ü–µ tournaments
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ users_repo.go               # CRUD-–æ–ø–µ—Ä–∞—Ü–∏–∏ –ø–æ —Ç–∞–±–ª–∏—Ü–µ users
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ pg.go                           # –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è PostgreSQL (pgxpool)
‚îÇ   ‚îî‚îÄ‚îÄ /game
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ render.go                       # ASCII-–æ—Ç—Ä–∏—Å–æ–≤–∫–∞ —à–∞—Ö–º–∞—Ç–Ω–æ–π –¥–æ—Å–∫–∏ (RenderASCIIBoardWhite(),RenderASCIIBoardHorizontal(),RenderASCIIBoardBlack())
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ utils.go                        # –õ–æ–≥–∏–∫–∞ AssignRandomColors, parseSquare –∏ –¥—Ä. –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ –º–µ—Ç–æ–¥—ã
‚îÇ   ‚îî‚îÄ‚îÄ /telegram
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ basic_handlers.go               # /start, /game_list, /play_with_bot
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ chat_handlers.go                # –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –≥—Ä—É–ø–ø—ã/—á–∞—Ç–∞ (create_chat, setroom)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ main_handlers.go                # HandleUpdate, handleCallback, handleNewChatMembers
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ move_handlers.go                # –•–æ–¥—ã (prepareMoveButtons, handleMoveCallback), parseCallbackData
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ notification.go                 # notifyGameStarted, SendBoardToRoomOrUsers, MakeFinalTitle –∏ —Ç.–¥.
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ room_handlers.go                # handleCreateRoom, handleJoinRoom, ...
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ tournament_handlers.go          # handleCreateRoom, handleJoinRoom, ...
‚îÇ   ‚îî‚îÄ‚îÄ /utils
‚îÇ       ‚îî‚îÄ‚îÄ logger.go                       # –ì–ª–æ–±–∞–ª—å–Ω—ã–π zap-–ª–æ–≥–≥–µ—Ä
‚îú‚îÄ‚îÄ .env                                    # –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è (BOT_TOKEN, PG_HOST, PG_PORT, ...)
‚îú‚îÄ‚îÄ docker-compose.yml
‚îú‚îÄ‚îÄ Dockerfile
‚îú‚îÄ‚îÄ go.mod                                  # Go-–º–æ–¥—É–ª—å, —Å–ø–∏—Å–æ–∫ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π (go-telegram-bot-api, jackc/pgx, etc.)
‚îî‚îÄ‚îÄ README.md                               # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è (–≤—ã –∑–¥–µ—Å—å!)
```

---

## 5. –û—Å–Ω–æ–≤–Ω—ã–µ —Ñ–∞–π–ª—ã –∏ —Ñ—É–Ω–∫—Ü–∏–∏

1. **`cmd/bot.go`**:
    - `main()` ‚Äî –∑–∞–ø—É—Å–∫–∞–µ—Ç –≤—Å—ë: Config, DB, Bot API.
2. **`config/config.go`**:
    - `ReadConfig()`, `Validate()`.
3. **`internal/db/rooms.go`**:
    - `CreateRoom()`, `GetRoomByID()`, `UpdateRoom()`, –ø–æ–ª—è `Room{
      RoomID, RoomTitle, Player1, Player2, Status, BoardState, IsWhiteTurn, WhiteID, BlackID, ChatID, CreatedAt, UpdatedAt}`.
4. **`internal/db/users.go`**:
    - `CreateOrUpdateUser()`, `GetUserByID()`, –ø–æ–ª—è `User{
      ID, Username, FirstName, ChatID, CurrentRoom, Rating, Wins, TotalGames}`.
5. **`internal/game/render.go`**:
    - `RenderASCIIBoardWhite()`, `RenderASCIIBoardHorizontal()`, `RenderASCIIBoardBlack()`.
6. **`internal/telegram/move_handlers.go`**:
    - `prepareMoveButtons()`, `handleChooseFigureCallback()`, `handleMoveCallback()`.
7. **`internal/telegram/notification.go`**:
    - `NotifyGameStarted()`, `SendMessageToRoomOrUsers()`.
8. **`internal/telegram/basic_handlers.go`**:
    - `handleStartCommand()`, `handlePlayWithBotCommand()`, `handleGameListCommand()`.
9. **`internal/telegram/main_handlers.go`**:
    - `HandleUpdate()`, `handleMessage()`, `handleCallback()`.
10. **`internal/telegram/room_handlers.go`**:
    - `handleCreateRoomCommand()`, `handleJoinRoom()`.
11. **`internal/utils/logger.go`**:
    - `InitLogger()`.

---

## 6. –°—Ü–µ–Ω–∞—Ä–∏–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

1. **–ó–∞–ø—É—Å–∫**:
    1. `go run ./cmd/bot.go`
    2. –ë–æ—Ç —á–∏—Ç–∞–µ—Ç `.env`, –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –∫ PostgreSQL, —Å–ª—É—à–∞–µ—Ç Telegram Updates.
2. **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å** –≤–≤–æ–¥–∏—Ç `/start`:
    - –ë–æ—Ç –≤—ã–≤–æ–¥–∏—Ç –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ –∏ **4 –∫–Ω–æ–ø–∫–∏**: ¬´–°–æ–∑–¥–∞—Ç—å –∫–æ–º–Ω–∞—Ç—É¬ª, ¬´–ú–æ–∏ –∏–≥—Ä—ã¬ª, ¬´–ò–≥—Ä–∞—Ç—å —Å –±–æ—Ç–æ–º¬ª, ¬´–°–æ–∑–¥–∞—Ç—å –∏ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –∫–æ–º–Ω–∞—Ç—É¬ª.
3. **–°–æ–∑–¥–∞—Ç—å –∫–æ–º–Ω–∞—Ç—É**:
    - –ü—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ ¬´üÜï –°–æ–∑–¥–∞—Ç—å –∫–æ–º–Ω–∞—Ç—É¬ª, –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è `handleCreateRoomCommand`, —Å–æ–∑–¥–∞—ë—Ç `rooms.CreateRoom`, `IsWhiteTurn=true`, –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç ¬´–ö–æ–º–Ω–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∞!¬ª.
4. **–°–æ–∑–¥–∞—Ç—å –∏ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å**:
    - –°–ø—Ä–∞—à–∏–≤–∞–µ—Ç ¬´–ö—Ç–æ –∑–∞ –±–µ–ª—ã—Ö? (–Ø —Å–∞–º / –°–æ–ø–µ—Ä–Ω–∏–∫)¬ª.
    - –í –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –≤—ã–±–æ—Ä–∞ ‚Üí `WhiteID`=creator –∏–ª–∏ `nil`, `BlackID`=`nil` –∏–ª–∏ `creator`.
5. **–í—Ç–æ—Ä–æ–π –∏–≥—Ä–æ–∫** (–ø—Ä–∏—à—ë–ª –ø–æ `t.me/bot?start=room_<id>`) ‚Üí `handleJoinRoom`: –µ—Å–ª–∏ `WhiteID == nil`, –æ–Ω —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –±–µ–ª—ã–º; –µ—Å–ª–∏ –Ω–µ—Ç, –æ–Ω —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è —á—ë—Ä–Ω—ã–º.
6. **–•–æ–¥—ã**:
    - –î–ª—è –ª–∏—á–∫–∏: `prepareMoveButtons(...)` ‚Üí ¬´choose_figure: e2¬ª ‚Üí ¬´move:e2-e4¬ª.
    - –î–ª—è –≥—Ä—É–ø–ø–æ–≤–æ–≥–æ —á–∞—Ç–∞: `RenderBoardHorizontal(...)` –ø—Ä–∏ –∫–∞–∂–¥–æ–º —Ö–æ–¥–µ.
    - `room.IsWhiteTurn` = !`room.IsWhiteTurn` –ø–æ—Å–ª–µ —Ö–æ–¥–∞.
7. **–û–∫–æ–Ω—á–∞–Ω–∏–µ**:
    - –ï—Å–ª–∏ `chess.Outcome()` = WhiteWon / BlackWon / Draw ‚Üí ¬´–ò–≥—Ä–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞!¬ª.

---

## 7. –ö–æ–º–∞–Ω–¥—ã –∏ inline-–∫–Ω–æ–ø–∫–∏

- **–ö–æ–º–∞–Ω–¥—ã** (–≤ –ª–∏—á–∫–µ):
    - `/start` ‚Äî –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ, 4 –∫–Ω–æ–ø–∫–∏,
    - `/create_room` ‚Äî –∞–Ω–∞–ª–æ–≥ ¬´–°–æ–∑–¥–∞—Ç—å –∫–æ–º–Ω–∞—Ç—É¬ª,
    - `/play_with_bot`, `/game_list`, ‚Ä¶
- **Inline-–∫–Ω–æ–ø–∫–∏**:
    - `"create_room"`, `"my_games"`, `"play_bot"`, `"setup_room"`,
    - `"choose_figure:b8"`, `"move:b8-c6"`,
    - `"setup_room_white:me"`, `"setup_room_white:opponent"`.

---

## 8. –ö–∞–∫ –¥–µ–ª–∞—Ç—å —Ö–æ–¥—ã

1. **–§–∏–≥—É—Ä—ã**:
    - –ü—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ –Ω–∞ –∫–Ω–æ–ø–∫—É ¬´choose_figure:b8¬ª, –±–æ—Ç —Å–º–æ—Ç—Ä–∏—Ç valid moves –¥–ª—è `b8` (–≤ `move_handlers.go`).
    - –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –∫–Ω–æ–ø–∫–∏ ¬´move:b8-c6¬ª, ¬´move:b8-a6¬ª –∏ —Ç.–¥.
2. **–•–æ–¥**:
    - –ü—Ä–∏ ¬´move:b8-c6¬ª, –º—ã –¥–µ–ª–∞–µ–º `game.Move(...)`. –ï—Å–ª–∏ –æ–∫, `room.IsWhiteTurn = !room.IsWhiteTurn`.
    - –í –ª–∏—á–∫—É –∫–∞–∂–¥–æ–º—É –∏–≥—Ä–æ–∫—É —É—Ö–æ–¥–∏—Ç ASCII-–¥–æ—Å–∫–∞ (–±–µ–ª–æ–º—É ‚Äî –Ω–æ—Ä–º–∞–ª—å–Ω–∞—è, —á—ë—Ä–Ω–æ–º—É ‚Äî –ø–µ—Ä–µ–≤—ë—Ä–Ω—É—Ç–∞—è).
    - –í –≥—Ä—É–ø–ø–æ–≤–æ–π —á–∞—Ç (–µ—Å–ª–∏ –µ—Å—Ç—å) –∏–¥—ë—Ç ¬´–≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–∞—è¬ª ASCII (–∏–ª–∏ SVG).

---

## 9. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

- **Unit-—Ç–µ—Å—Ç—ã**: –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Go-–ø–∞–∫–µ—Ç `testing`.
    - –ú–æ–∫–∞—Ç—å BotAPI (`mockBot.Send(...)`).
    - –ü—Ä–æ–≤–µ—Ä—è—Ç—å, —á—Ç–æ –ø—Ä–∏ `/start` (–∫–æ–º–∞–Ω–¥–∞) –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è `handleStartCommand` –∏ —Å–æ–∑–¥–∞—ë—Ç 4 –∫–Ω–æ–ø–∫–∏.
    - –¢–µ—Å—Ç–∏—Ç—å ¬´/start room_{id}¬ª ‚Üí `handleJoinRoom`.
    - –¢–µ—Å—Ç–∏—Ç—å ¬´move:b2-b4¬ª ‚Üí `room.IsWhiteTurn` –ø–µ—Ä–µ–∫–ª—é—á–∞–µ—Ç—Å—è.
- **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã**: –ø–æ–¥–Ω—è—Ç—å –±–æ—Ç–∞ –ª–æ–∫–∞–ª—å–Ω–æ, —Ä–µ–∞–ª—å–Ω–æ –ø–æ—Ö–æ–¥–∏—Ç—å –¥–≤—É–º—è –∞–∫–∫–∞—É–Ω—Ç–∞–º–∏.

---

## 10. –î–∞–ª—å–Ω–µ–π—à–∏–µ –ø–ª–∞–Ω—ã

- **–ü–æ–ª–Ω–æ—Ü–µ–Ω–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ SVG** –≤ –≥—Ä—É–ø–ø–∞—Ö (–≤–º–µ—Å—Ç–æ ASCII).
- **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ** —Ö–æ–¥–æ–≤ –≤ PGN, /moves_history.
- **–°–∏—Å—Ç–µ–º–∞ —Ä–µ–π—Ç–∏–Ω–≥–∞** (wins, totalGames) –≤ —Ç–∞–±–ª–∏—Ü–µ `users`.
- **–¢—É—Ä–Ω–∏—Ä–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞** (—É–∂–µ –µ—Å—Ç—å –∑–∞–≥–æ—Ç–æ–≤–∫–∏ tournaments_repo.go).
- **HTML5 Web-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å** (React) –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å —Å Telegram Games API.
- –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ –Ω–∞ **WhatsApp/Discord** (—á–µ—Ä–µ–∑ –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å—ã, NATS).
- –î–æ–ø–æ–ª–Ω–∏—Ç—å **AI/ChessEngine**-–±–æ—Ç (–ø—Ä–æ—Ç–∏–≤ –∫–æ–º–ø—å—é—Ç–µ—Ä–∞) —á–µ—Ä–µ–∑ notnil/chess.Engine API –∏–ª–∏ —Å—Ç–æ—Ä–æ–Ω–Ω–∏–π –¥–≤–∏–∂–æ–∫.
---